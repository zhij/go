<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta content="telephone=no,email=no" name="format-detection">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
	<title></title>
	<link rel="stylesheet" href="css/swiper.min.css">
	<link rel="stylesheet" href="css/style.css">
	<script type="text/javascript">
		;(function (doc, win) {
	        var docEl = doc.documentElement,
	            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
	            recalc = function () {
	                var clientWidth = docEl.clientWidth;
	                if (!clientWidth) return;
	                if(clientWidth>=450){
	                    docEl.style.fontSize = '60px';
	                }else{
	                    docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
	                }
	            };

	        if (!doc.addEventListener) return;
	        win.addEventListener(resizeEvt, recalc, false);
	        doc.addEventListener('DOMContentLoaded', recalc, false);
	    })(document, window);
	</script>
</head>
<body>
	<div class="wrp">
		<div class="ico-music play"></div>
		<div class="swiper-container">
	        <div class="swiper-wrapper">
	            <div class="swiper-slide p1 swiper-no-swiping">
	            	<img class="p1-title" src="images/p1-title.png" alt="">
					<div class="p1-video">
						<div class="p1-wheel1"></div>
						<div class="p1-wheel2"></div>
						<div class="p1-light"></div>
					</div>
					<p class="p1-des line1"></p>
					<p class="p1-des line2"></p>
					<p class="p1-des line3"></p>
					<p class="p1-des line4"></p>
					<p class="p1-des line5"></p>
					<p class="p1-des line6"></p>
					<a id="p1-btn" class="p1-btn" href="javascript:;"></a>
	            </div>
	            <div class="swiper-slide p2 swiper-no-swiping">
	            	<div class="center">
						<div class="item left">
							<div class="p2-round">
								<div class="p2-wheel"></div>
								<a href="details.html?from=1" class="p2-play"></a>
							</div>
							<div class="p2-bg">
								<div class="p2-txt"></div>
							</div>
						</div>
						<div class="item right">
							<div class="p2-bg">
								<div class="p2-txt"></div>
							</div>
							<div class="p2-round">
								<div class="p2-wheel"></div>
								<a href="details.html?from=2" class="p2-play"></a>
							</div>
						</div>
						<div class="item left">
							<div class="p2-round">
								<div class="p2-wheel"></div>
								<a href="details.html?from=3" class="p2-play"></a>
							</div>
							<div class="p2-bg">
								<div class="p2-txt"></div>
							</div>
						</div>
						<div class="item right">
							<div class="p2-bg">
								<div class="p2-txt"></div>
							</div>
							<div class="p2-round">
								<div class="p2-wheel"></div>
								<a href="details.html?from=4" class="p2-play"></a>
							</div>
						</div>
						<div class="item left">
							<div class="p2-round">
								<div class="p2-wheel"></div>
								<a href="details.html?from=5" class="p2-play"></a>
							</div>
							<div class="p2-bg">
								<div class="p2-txt"></div>
							</div>
						</div>
					</div>
	            </div>
	        </div>
	    </div>
    </div>
    <audio id="bgm" src="music/p1.mp3" autoplay loop="loop">
	您的浏览器不支持 audio 标签。
	</audio>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script type="text/javascript" src="js/swiper.jquery.min.js"></script>
	<script type="text/javascript">
		

		 //获取url中的参数
        function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
            var r = window.location.search.substr(1).match(reg);  //匹配目标参数
            if (r != null) return unescape(r[2]); return null; //返回参数值
        }

        var from = getUrlParam("from");
        // 从详情页跳过来，直接去到目录页
        if(from == "details"){
        	var swiper = new Swiper('.swiper-container', {
				direction : 'vertical',
				noSwiping : true,
				initialSlide:1
			});
        } else {
        	var swiper = new Swiper('.swiper-container', {
				direction : 'vertical',
				noSwiping : true
			});
        }

		$("#p1-btn").click(function(){
			swiper.slideNext();
		})
		$(".ico-music").click(function(){
			// 正在播放
			if($(this).hasClass("play")){
				$(this).removeClass("play");
				$("#bgm")[0].pause(); 
			}else {
				$(this).addClass("play");
				$("#bgm")[0].play(); 
			}
		})

		//一般情况下，这样就可以自动播放了，但是一些奇葩iPhone机不可以 
	    document.getElementById('bgm').play(); 
	    //必须在微信Weixin JSAPI的WeixinJSBridgeReady才能生效 
	    document.addEventListener("WeixinJSBridgeReady", function () { 
	        document.getElementById('bgm').play(); 
	    }, false); 
	</script>
</body>
</html>